# Nvidia Driver and CUDA are required for these 2 subnodes
subnode_config {
    # Camera node
    subnodes {
        id: 4
        name: "Lidar16ProcessSubnode"
        reserve: "device_id:velodyne16;"
        type: SUBNODE_IN
    }
    subnodes {
        id: 5
        name: "RadarProcessSubnode"
        reserve: "device_id:radar_front;"
        type: SUBNODE_IN
    }
    subnodes {
        id: 31
        name: "FusionSubnode"
        reserve: "pub_driven_event_id:1013;lidar_event_id:1013;radar_event_id:1014;"
        type: SUBNODE_OUT
    }
    # TrafficLight Preprocess node.
    subnodes {
        id: 42
        name: "TLPreprocessorSubnode"
        type: SUBNODE_IN
    }

    # TrafficLight process node.
    subnodes {
        id: 43
        name: "TLProcSubnode"
        type: SUBNODE_OUT
    }
}

###################################################################
# Define all edges which link nodes.
edge_config {


    # LidarSubnode -> FusionSubnode
    edges {
        id: 113
        from_node: 4
        to_node: 31
        events {
            id: 1013
            name: "lidar_fusion"
        }
    }

    # RadarSubnode -> FusionSubnode
    edges {
        id: 114
        from_node: 5
        to_node: 31
        events {
            id: 1014
            name: "radar_fusion"
        }
    }
    # TLPreprocessorSubnode -> TLProcSubnode
    edges {
        id: 201
        from_node: 42
        to_node: 43
        events {
            id: 1003
            name: "traffic_light"
        }
    }
}

# Shared Data
data_config {
    datas {
        id: 3
        name: "TLPreprocessingData"
    }
    datas {
        id: 5
        name: "CameraObjectData"
    }
    datas {
        id: 7
        name: "CameraSharedData"
    }
    datas {
        id: 9
        name: "FusionSharedData"
    }
    datas {
        id: 10
        name: "LidarObjectData"
    }
    datas {
        id: 12
        name: "SceneSharedData"
    }
    datas {
        id: 13
        name: "RadarObjectData"
    }
}
